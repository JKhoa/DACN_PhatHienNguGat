# HÆ°á»›ng dáº«n Thu tháº­p Dá»¯ liá»‡u - Há»c sinh Ngá»§ gáº­t

## ğŸ“‹ Tá»•ng quan
TÃ i liá»‡u nÃ y hÆ°á»›ng dáº«n thu tháº­p vÃ  xá»­ lÃ½ hÃ¬nh áº£nh/video tá»« cÃ¡c nguá»“n miá»…n phÃ­ Ä‘á»ƒ bá»• sung vÃ o dataset `data_raw` cho viá»‡c huáº¥n luyá»‡n mÃ´ hÃ¬nh phÃ¡t hiá»‡n ngá»§ gáº­t.

## ğŸ¯ Má»¥c tiÃªu thu tháº­p
- **Äa dáº¡ng tÆ° tháº¿**: ngá»§ gáº­t nháº¹, gá»¥c xuá»‘ng bÃ n, ngáº£ nghiÃªng
- **Äa dáº¡ng mÃ´i trÆ°á»ng**: lá»›p há»c, thÆ° viá»‡n, bÃ n lÃ m viá»‡c
- **Äa dáº¡ng Ä‘á»‘i tÆ°á»£ng**: nam/ná»¯, Ä‘á»™ tuá»•i khÃ¡c nhau, dÃ¢n tá»™c khÃ¡c nhau
- **Äa dáº¡ng Ä‘iá»u kiá»‡n**: Ã¡nh sÃ¡ng tá»± nhiÃªn/nhÃ¢n táº¡o, gÃ³c camera khÃ¡c nhau

## ğŸ“‚ Nguá»“n dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á» xuáº¥t

### ğŸ–¼ï¸ HÃ¬nh áº£nh cháº¥t lÆ°á»£ng cao tá»« Pexels:

1. **Photo of a Schoolgirl Sleeping**
   - URL: https://www.pexels.com/photo/photo-of-a-schoolgirl-sleeping-9489900/
   - Äáº·c Ä‘iá»ƒm: Ná»¯ sinh ngá»§ trong lá»›p há»c
   - Æ¯u Ä‘iá»ƒm: MÃ´i trÆ°á»ng lá»›p há»c thá»±c táº¿

2. **Tired female student sleeping on books in light room**
   - URL: https://www.pexels.com/photo/tired-female-student-sleeping-on-books-in-light-room-7034472/
   - Äáº·c Ä‘iá»ƒm: Gá»¥c xuá»‘ng trÃªn sÃ¡ch vá»Ÿ
   - Æ¯u Ä‘iá»ƒm: TÆ° tháº¿ gá»¥c xuá»‘ng bÃ n Ä‘iá»ƒn hÃ¬nh

3. **Student Sleeping on his Desk**
   - URL: https://www.pexels.com/photo/student-sleeping-on-his-desk-6683966/
   - Äáº·c Ä‘iá»ƒm: Nam sinh ngá»§ trÃªn bÃ n
   - Æ¯u Ä‘iá»ƒm: GÃ³c chá»¥p phÃ¹ há»£p cho pose detection

4. **A Kid Sleeping on White Desk with Textbooks**
   - URL: https://www.pexels.com/photo/a-kid-sleeping-on-white-desk-with-textbooks-8423127/
   - Äáº·c Ä‘iá»ƒm: Tráº» em ngá»§ trÃªn bÃ n há»c
   - Æ¯u Ä‘iá»ƒm: Äa dáº¡ng Ä‘á»™ tuá»•i

5. **Exhausted female student sleeping at table in library**
   - URL: https://www.pexels.com/photo/exhausted-female-student-sleeping-at-table-in-library-3808119/
   - Äáº·c Ä‘iá»ƒm: MÃ´i trÆ°á»ng thÆ° viá»‡n
   - Æ¯u Ä‘iá»ƒm: Ãnh sÃ¡ng khÃ¡c biá»‡t

### ğŸ¬ Video tá»« Pexels:

1. **Student Sleeping in Classroom**
   - URL: https://www.pexels.com/video/student-sleeping-in-classroom-6672265/
   - Äáº·c Ä‘iá»ƒm: Video trong lá»›p há»c
   - Æ¯u Ä‘iá»ƒm: CÃ³ thá»ƒ trÃ­ch xuáº¥t nhiá»u frame

2. **Exhausted Student Sleeping on a Bench**
   - URL: https://www.pexels.com/video/exhausted-student-sleeping-on-a-bench-6083402/
   - Äáº·c Ä‘iá»ƒm: Video ngoÃ i trá»i
   - Æ¯u Ä‘iá»ƒm: MÃ´i trÆ°á»ng khÃ¡c biá»‡t

### ğŸ“· HÃ¬nh áº£nh tá»« Unsplash:

1. **School girl sleeping in class (foreground)**
   - URL: https://unsplash.com/photos/school-girl-sleeping-on-class-teenagers-students-sitting-in-the-classroom-focus-is-on-foreground-abEsPl3RWDc
   - Äáº·c Ä‘iá»ƒm: Focus rÃµ nÃ©t á»Ÿ foreground

2. **Tired and bored school girl/boy sleeping at desk**
   - URLs: 
     - https://unsplash.com/photos/a-small-tired-and-bored-school-girl-sitting-at-the-desk-in-classroom-sleeping-D6psBQOI62A
     - https://unsplash.com/photos/a-small-tired-and-bored-school-boy-sitting-at-the-desk-in-classroom-sleeping-Lw0ifWVh6sI
   - Äáº·c Ä‘iá»ƒm: Cáº·p áº£nh nam/ná»¯ tÆ°Æ¡ng tá»±

## ğŸ› ï¸ HÆ°á»›ng dáº«n táº£i xuá»‘ng

### CÃ¡ch 1: Táº£i thá»§ cÃ´ng
```bash
# Táº¡o thÆ° má»¥c cho dá»¯ liá»‡u má»›i
mkdir data_raw/pexels_images
mkdir data_raw/unsplash_images
mkdir data_raw/video_frames
```

1. **Vá»›i Pexels**:
   - Truy cáº­p link â†’ Click "Free Download" â†’ Chá»n kÃ­ch thÆ°á»›c "Large" hoáº·c "Original"
   - LÆ°u vÃ o `data_raw/pexels_images/`

2. **Vá»›i Unsplash**:
   - Truy cáº­p link â†’ Click "Download" â†’ Chá»n kÃ­ch thÆ°á»›c lá»›n nháº¥t
   - LÆ°u vÃ o `data_raw/unsplash_images/`

3. **Vá»›i Video**:
   - Táº£i video vá» â†’ Sá»­ dá»¥ng script trÃ­ch xuáº¥t frame

### CÃ¡ch 2: Script tá»± Ä‘á»™ng (Ä‘á» xuáº¥t)
```python
# Táº¡o file download_dataset.py
import requests
import os
from urllib.parse import urlparse

def download_image(url, filename):
    """Táº£i áº£nh tá»« URL"""
    try:
        response = requests.get(url, stream=True)
        if response.status_code == 200:
            with open(filename, 'wb') as f:
                for chunk in response.iter_content(chunk_size=8192):
                    f.write(chunk)
            return True
    except Exception as e:
        print(f"Error downloading {url}: {e}")
    return False

# Danh sÃ¡ch URL cáº§n táº£i (cáº­p nháº­t URL thá»±c táº¿ tá»« Pexels/Unsplash)
image_urls = [
    # ThÃªm URL trá»±c tiáº¿p Ä‘áº¿n file áº£nh (khÃ´ng pháº£i trang web)
    # VÃ­ dá»¥: "https://images.pexels.com/photos/9489900/pexels-photo-9489900.jpeg"
]

# Táº£i xuá»‘ng
for i, url in enumerate(image_urls):
    filename = f"data_raw/downloaded_image_{i:03d}.jpg"
    if download_image(url, filename):
        print(f"Downloaded: {filename}")
```

## ğŸï¸ TrÃ­ch xuáº¥t frame tá»« video

```python
# Táº¡o file extract_frames.py
import cv2
import os

def extract_frames(video_path, output_dir, fps=2):
    """TrÃ­ch xuáº¥t frame tá»« video"""
    cap = cv2.VideoCapture(video_path)
    video_fps = cap.get(cv2.CAP_PROP_FPS)
    frame_interval = int(video_fps / fps)  # Láº¥y fps frame/giÃ¢y
    
    frame_count = 0
    saved_count = 0
    
    while True:
        ret, frame = cap.read()
        if not ret:
            break
            
        if frame_count % frame_interval == 0:
            filename = f"{output_dir}/frame_{saved_count:04d}.jpg"
            cv2.imwrite(filename, frame)
            saved_count += 1
            
        frame_count += 1
    
    cap.release()
    print(f"Extracted {saved_count} frames from {video_path}")

# Sá»­ dá»¥ng
extract_frames("downloaded_video.mp4", "data_raw/video_frames", fps=2)
```

## ğŸ·ï¸ Quy trÃ¬nh gÃ¡n nhÃ£n

1. **Sao chÃ©p áº£nh má»›i vÃ o data_raw**:
```bash
# Di chuyá»ƒn táº¥t cáº£ áº£nh má»›i vÃ o data_raw
cp pexels_images/* ../data_raw/
cp unsplash_images/* ../data_raw/
cp video_frames/* ../data_raw/
```

2. **Cháº¡y auto-labeling**:
```bash
cd yolo-sleepy-allinone-final/tools
python auto_label_pose.py --source "../../data_raw" --out "../datasets/sleepy_pose" --val-ratio 0.2
```

3. **Kiá»ƒm tra vÃ  hiá»‡u chá»‰nh nhÃ£n thá»§ cÃ´ng**:
   - Duyá»‡t qua cÃ¡c file `.txt` trong `datasets/sleepy_pose/train/labels`
   - Sá»­a láº¡i class label náº¿u cáº§n:
     - `0`: binhthuong (bÃ¬nh thÆ°á»ng)
     - `1`: ngugat (ngá»§ gáº­t) 
     - `2`: gucxuongban (gá»¥c xuá»‘ng bÃ n)

## ğŸ“Š Má»¥c tiÃªu sá»‘ lÆ°á»£ng

- **Hiá»‡n táº¡i**: ~25 áº£nh â†’ 64 annotations
- **Má»¥c tiÃªu**: ~100-150 áº£nh má»›i tá»« nguá»“n miá»…n phÃ­
- **Ká»³ vá»ng**: ~300-400 annotations tá»•ng cá»™ng
- **PhÃ¢n bá»‘ mong muá»‘n**:
  - binhthuong: 40%
  - ngugat: 35% 
  - gucxuongban: 25%

## âš–ï¸ LÆ°u Ã½ phÃ¡p lÃ½

### Giáº¥y phÃ©p sá»­ dá»¥ng:
- **Pexels License**: Miá»…n phÃ­ thÆ°Æ¡ng máº¡i, khÃ´ng cáº§n attribution
- **Unsplash License**: Miá»…n phÃ­ thÆ°Æ¡ng máº¡i, khuyáº¿n khÃ­ch attribution  
- **Pixabay License**: Miá»…n phÃ­ thÆ°Æ¡ng máº¡i, khÃ´ng cáº§n attribution

### Attribution Ä‘á» xuáº¥t:
```
# Trong file README.md hoáº·c bÃ¡o cÃ¡o
## Dataset Attribution
Some images in this dataset are sourced from:
- Pexels (https://www.pexels.com) - Pexels License
- Unsplash (https://unsplash.com) - Unsplash License
- Pixabay (https://pixabay.com) - Pixabay License

All images are used under their respective free licenses for educational/research purposes.
```

## ğŸ”„ Quy trÃ¬nh tá»± Ä‘á»™ng hoÃ¡

### Script tá»•ng há»£p (recommended):
```bash
# Táº¡o file collect_and_process.py
#!/usr/bin/env python3

def main():
    print("=== Dataset Collection & Processing Pipeline ===")
    
    # 1. Táº¡o thÆ° má»¥c
    create_directories()
    
    # 2. Táº£i xuá»‘ng (náº¿u cÃ³ URL trá»±c tiáº¿p)
    download_images()
    
    # 3. TrÃ­ch xuáº¥t video frames
    process_videos()
    
    # 4. Sao chÃ©p vÃ o data_raw
    copy_to_data_raw()
    
    # 5. Cháº¡y auto-labeling
    run_auto_labeling()
    
    # 6. BÃ¡o cÃ¡o káº¿t quáº£
    report_results()

if __name__ == "__main__":
    main()
```

## ğŸ¯ Tiáº¿p theo

1. **Táº£i xuá»‘ng 20-30 áº£nh cháº¥t lÆ°á»£ng cao nháº¥t** tá»« danh sÃ¡ch trÃªn
2. **Cháº¡y auto-labeling** vá»›i dá»¯ liá»‡u má»›i
3. **Huáº¥n luyá»‡n láº¡i model** vá»›i dataset má»Ÿ rá»™ng
4. **So sÃ¡nh performance** trÆ°á»›c vÃ  sau khi bá»• sung dá»¯ liá»‡u
5. **Tá»‘i Æ°u hÃ³a** dataset dá»±a trÃªn káº¿t quáº£

---
*Ghi chÃº: VÃ¬ khÃ´ng thá»ƒ táº£i tá»± Ä‘á»™ng, viá»‡c thu tháº­p dá»¯ liá»‡u cáº§n thá»±c hiá»‡n thá»§ cÃ´ng theo hÆ°á»›ng dáº«n trÃªn.*